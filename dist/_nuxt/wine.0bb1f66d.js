import{_ as q,o as p,c as w,a as e,S as V,T as H,I as C,A as B,U as R,V as F,j as h,W as N,X as S,n as j,t as x,H as O,Q as I,R as K,i as z,Y as G,Z as J,E as Q,$ as X,B as U,M as L,a0 as Y,a1 as T,C as Z,h as A,x as D,N as ee,a2 as te,u as ne,a3 as se,b as E}from"./entry.3a129413.js";import{h as ae}from"./index.344f9f74.js";const oe={},re={class:"dark:bg-gray-900"},ie=e("div",{class:"py-8 px-4 mx-auto max-w-screen-xl text-center lg:py-16"},[e("h1",{class:"mb-4 text-4xl font-teko tracking-widest leading-none md:text-6xl lg:text-8xl text-[#FDA47E] dark:text-[#FDA47E] font-bold"},"GÓÐ VÍNKAUP"),e("p",{class:"mb-8 text-lg font-montserrat text-[#FDA47E] lg:text-2xl sm:px-16 lg:px-48 dark:text-[#FDA47E]"}," Hér er hægt að leita í vínlista ÁTVR og Sante ásamt einkunn þeirra frá Vivino. Einungis er um að ræða 750ml flöskur því allt annað er bara rugl. ")],-1),le=[ie];function ce(r,i){return p(),w("section",re,le)}const ue=q(oe,[["render",ce]]),de={class:"mx-auto max-w-3xl md:w-full bg-[#FFE7D4] rounded-lg shadow m-5"},fe={class:"m-2 max-w-screen-md"},me={class:"rounded-xl p-6"},_e=e("h2",{class:"text-stone-700 text-xl font-bold"},"Þrengdu niðurstöðurnar",-1),he=e("p",{class:"mt-1 text-sm"},"Prófaðu síurnar. Með leitinni er hægt að leita að ýmsum eiginleikum, eins og nafni, árgerð og landi.",-1),ge={class:"mt-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},xe={class:"flex flex-col"},pe=e("label",{for:"searchAll",class:"text-stone-600 text-sm font-medium"},"Leit",-1),ye={class:"flex flex-col"},ve=e("label",{for:"wineType",class:"text-stone-600 text-sm font-medium"},"Tegund",-1),we=e("option",null,"Allar",-1),be=e("option",null,"Rauðvín",-1),ke=e("option",null,"Hvítvín",-1),De=e("option",null,"Rósavín",-1),$e=e("option",null,"Freyðivín",-1),Ae=[we,be,ke,De,$e],Ce={class:"flex flex-col"},Pe=e("label",{for:"winePriceMin",class:"text-stone-600 text-sm font-medium"},"Lágmarksverð",-1),Re={class:"flex flex-col"},Fe=e("label",{for:"winePriceMin",class:"text-stone-600 text-sm font-medium"},"Hámarksverð",-1),Ee={__name:"wineFilters",setup(r){const i=V(),n=H(),o=C(""),t=C({category:"Allar",min:"",max:""}),a={Allar:"Any",Rauðvín:"Red Wine",Hvítvín:"White Wine",Rósavín:"Rose",Freyðivín:"Sparkling Wine"};function d(s,u){return Object.keys(s).find(f=>s[f]===u)}B(()=>{const{query:s}=i;s.category&&(t.value.category=d(a,s.category)),s.minPrice&&(t.value.min=s.minPrice),s.maxPrice&&(t.value.max=s.maxPrice),s.search&&(o.value=s.search)});const g=()=>{const s={};t.value.min&&(s.minPrice=t.value.min),t.value.max&&(s.maxPrice=t.value.max),s.category=a[t.value.category],o.value&&(s.search=o.value.trim()),console.log(s),n.push({query:{...s}})},m=()=>{n.replace({query:void 0}),t.value.min="",t.value.max="",t.value.category="Allar",o.value=""};return(s,u)=>(p(),w("div",de,[e("div",fe,[e("div",me,[_e,he,e("div",ge,[e("div",xe,[pe,R(e("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=f=>N(o)?o.value=f:null),id:"searchAll",placeholder:"prófaðu leitina",class:"mt-2 block w-full rounded-md border border-gray-200 px-2 py-2 shadow-sm outline-none focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[F,h(o)]])]),e("div",ye,[ve,R(e("select",{id:"wineType","onUpdate:modelValue":u[1]||(u[1]=f=>h(t).category=f),class:"mt-2 block w-full rounded-md border border-gray-200 px-2 py-2 shadow-sm outline-none focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},Ae,512),[[S,h(t).category]])]),e("div",Ce,[Pe,R(e("input",{type:"number",id:"winePriceMin",placeholder:"Lágmarksverð","onUpdate:modelValue":u[2]||(u[2]=f=>h(t).min=f),class:"mt-2 block w-full rounded-md border border-gray-200 px-2 py-2 shadow-sm outline-none focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[F,h(t).min]])]),e("div",Re,[Fe,R(e("input",{type:"number",id:"winePriceMax",placeholder:"Hámarksverð","onUpdate:modelValue":u[3]||(u[3]=f=>h(t).max=f),class:"mt-2 block w-full rounded-md border border-gray-200 px-2 py-2 shadow-sm outline-none focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[F,h(t).max]])])]),e("div",{class:"mt-6 grid w-full grid-cols-2 justify-end space-x-4 md:flex"},[e("button",{onClick:m,class:"active:scale-95 rounded-lg bg-gray-200 px-8 py-2 font-medium text-gray-600 outline-none focus:ring hover:opacity-90"},"Endurstilla"),e("button",{onClick:g,class:"active:scale-95 rounded-lg bg-blue-600 px-8 py-2 font-medium text-white outline-none focus:ring hover:opacity-90"},"Leita")])])])]))}},Me=Ee,Oe={class:"mx-auto max-w-3xl md:w-full bg-[#FFE7D4] rounded-lg shadow m-5"},Ue={class:"flex flex-col p-7 font-teko"},Ve={class:"mb-10 text-5xl font-medium dark:text-white"},Le={class:"grid grid-cols-2 gap-4"},Te={class:"text-md text-xl"},We=e("div",null,[e("span",{class:"text-md text-[#7a7a7a]"},"FRAMLEIÐANDI")],-1),qe={class:"text-md text-xl"},He=e("div",null,[e("span",{class:"text-md text-[#7a7a7a]"},"VERÐ")],-1),Be={class:"text-md text-xl"},Ne=e("div",null,[e("span",{class:"text-md text-[#7a7a7a]"},"LAND")],-1),Se={class:"text-md text-xl"},je=e("div",null,[e("span",{class:"text-md text-[#7a7a7a]"},"EINKUNN")],-1),Ie={key:0},Ke={class:"text-md text-xl"},ze=e("div",null,[e("span",{class:"text-md text-[#7a7a7a]"},"BRAGÐFLOKKUR")],-1),Ge={key:1},Je={class:"text-md text-xl"},Qe=e("div",null,[e("span",{class:"text-md text-[#7a7a7a]"},"ÞRÚGUR")],-1),Xe={class:"flex mt-4 md:mt-6 tracking-wide"},Ye=["href"],Ze=["href"],et={__name:"wineCard",props:{wine:Object,link_vivino:String,link_store:String},setup(r){const i=r;let n,o;return(()=>{i.wine.category=="Red Wine"?(n="text-[#a82548]",o="Rauðvín"):i.wine.category=="White Wine"?(n="text-[#a9ae03]",o="Hvítvín"):i.wine.category=="Rose"?(n="text-[#f98e72]",o="Rósavín"):(n="text-[#fec67a]",o="Freyðivín")})(),(a,d)=>(p(),w("div",null,[e("div",Oe,[e("div",Ue,[e("p",{class:j(["text-lg",`${h(n)}`])},x(h(o)),3),e("h2",Ve,x(r.wine.wine_name),1),e("div",Le,[e("div",null,[e("div",null,[e("span",Te,x(r.wine.producer),1)]),We]),e("div",null,[e("div",null,[e("span",qe,x(parseInt(r.wine.price).toLocaleString("de-DE")),1)]),He]),e("div",null,[e("div",null,[e("span",Be,x(r.wine.country),1)]),Ne]),e("div",null,[e("div",null,[e("span",Se,x(r.wine.rating),1)]),je]),r.wine.taste_group?(p(),w("div",Ie,[e("div",null,[e("span",Ke,x(r.wine.taste_group),1)]),ze])):O("",!0),r.wine.grapes!=0?(p(),w("div",Ge,[e("div",null,[e("span",Je,x(r.wine.grapes),1)]),Qe])):O("",!0)]),e("div",Xe,[e("a",{href:i.link_store,target:"_blank",class:"inline-flex items-center px-4 py-2 text-m font-medium text-center text-white bg-[#625A5A] rounded-lg hover:bg-[#888080] focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-[#625A5A] dark:hover:bg-[#888080] dark:focus:ring-[#352E2E]"},x(r.wine.seller),9,Ye),e("a",{href:i.link_vivino,target:"_blank",class:"inline-flex items-center px-4 py-2 text-m font-medium text-center text-gray-900 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-700 dark:focus:ring-gray-700 ms-3"},"Vivino",8,Ze)])])])]))}},tt=et,nt={__name:"wineCards",props:{wines:Array},setup(r){return(i,n)=>{const o=tt;return p(),w("div",null,[(p(!0),w(I,null,K(r.wines,t=>(p(),z(o,{key:t.pk_wine,wine:t,link_vivino:t.link_vivino,link_store:t.link},null,8,["wine","link_vivino","link_store"]))),128))])}}},st=nt;function at(...r){var b;const i=typeof r[r.length-1]=="string"?r.pop():void 0;typeof r[0]!="string"&&r.unshift(i);let[n,o,t={}]=r;if(typeof n!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof o!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const a=Y(),d=()=>null,g=()=>a.isHydrating?a.payload.data[n]:a.static.data[n];t.server=t.server??!0,t.default=t.default??d,t.getCachedData=t.getCachedData??g,t.lazy=t.lazy??!1,t.immediate=t.immediate??!0,t.deep=t.deep??G.deep;const m=()=>![null,void 0].includes(t.getCachedData(n));if(!a._asyncData[n]||!t.immediate){(b=a.payload._errors)[n]??(b[n]=null);const l=t.deep?C:J;a._asyncData[n]={data:l(t.getCachedData(n)??t.default()),pending:C(!m()),error:Q(a.payload._errors,n),status:C("idle")}}const s={...a._asyncData[n]};s.refresh=s.execute=(l={})=>{if(a._asyncDataPromises[n]){if(l.dedupe===!1)return a._asyncDataPromises[n];a._asyncDataPromises[n].cancelled=!0}if((l._initial||a.isHydrating&&l._initial!==!1)&&m())return Promise.resolve(t.getCachedData(n));s.pending.value=!0,s.status.value="pending";const y=new Promise((c,_)=>{try{c(o(a))}catch(P){_(P)}}).then(c=>{if(y.cancelled)return a._asyncDataPromises[n];let _=c;t.transform&&(_=t.transform(c)),t.pick&&(_=ot(_,t.pick)),a.payload.data[n]=_,s.data.value=_,s.error.value=null,s.status.value="success"}).catch(c=>{if(y.cancelled)return a._asyncDataPromises[n];s.error.value=T(c),s.data.value=h(t.default()),s.status.value="error"}).finally(()=>{y.cancelled||(s.pending.value=!1,delete a._asyncDataPromises[n])});return a._asyncDataPromises[n]=y,a._asyncDataPromises[n]};const u=()=>s.refresh({_initial:!0}),f=t.server!==!1&&a.payload.serverRendered;{const l=Z();if(l&&!l._nuxtOnBeforeMountCbs){l._nuxtOnBeforeMountCbs=[];const c=l._nuxtOnBeforeMountCbs;l&&(X(()=>{c.forEach(_=>{_()}),c.splice(0,c.length)}),U(()=>c.splice(0,c.length)))}f&&a.isHydrating&&(s.error.value||m())?(s.pending.value=!1,s.status.value=s.error.value?"error":"success"):l&&(a.payload.serverRendered&&a.isHydrating||t.lazy)&&t.immediate?l._nuxtOnBeforeMountCbs.push(u):t.immediate&&u(),t.watch&&L(t.watch,()=>s.refresh());const y=a.hook("app:data:refresh",async c=>{(!c||c.includes(n))&&await s.refresh()});l&&U(y)}const $=Promise.resolve(a._asyncDataPromises[n]).then(()=>s);return Object.assign($,s),$}function ot(r,i){const n={};for(const o of i)n[o]=r[o];return n}function rt(r,i,n){const[o={},t]=typeof i=="string"?[{},i]:[i,n],a=A(()=>{let k=r;return typeof k=="function"&&(k=k()),D(k)}),d=o.key||ae([t,typeof a.value=="string"?a.value:"",...it(o)]);if(!d||typeof d!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+d);if(!r)throw new Error("[nuxt] [useFetch] request is missing.");const g=d===t?"$f"+d:d;if(!o.baseURL&&typeof a.value=="string"&&a.value.startsWith("//"))throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:m,lazy:s,default:u,transform:f,pick:$,watch:b,immediate:l,getCachedData:y,deep:c,..._}=o,P=ee({...te,..._,cache:typeof o.cache=="boolean"?void 0:o.cache}),W={server:m,lazy:s,default:u,transform:f,pick:$,immediate:l,getCachedData:y,deep:c,watch:b===!1?[]:[P,a,...b||[]]};let v;return at(g,()=>{var M;(M=v==null?void 0:v.abort)==null||M.call(v),v=typeof AbortController<"u"?new AbortController:{};const k=D(o.timeout);return k&&setTimeout(()=>v.abort(),k),(o.$fetch||globalThis.$fetch)(a.value,{signal:v.signal,...P})},W)}function it(r){var n;const i=[((n=D(r.method))==null?void 0:n.toUpperCase())||"GET",D(r.baseURL)];for(const o of[r.params||r.query]){const t=D(o);if(!t)continue;const a={},d=Array.isArray(t)?t:Object.entries(t);for(const[g,m]of d)a[D(g)]=D(m);i.push(a)}return i}const lt=async r=>{const{data:i,error:n,refresh:o}=await rt("/api/wines/wine",{params:{...r}},"$24Kif7eIWn");if(n.value)throw T({...n.value,statusMessage:"Unable to fetch data"});return{data:i,refresh:o}},mt={__name:"wine",async setup(r){let i,n;ne({title:"Vín"});const o=V(),t=A(()=>o.query.maxPrice),a=A(()=>o.query.minPrice),d=A(()=>o.query.category),g=A(()=>o.query.search),{data:m,refresh:s}=([i,n]=se(()=>lt({minPrice:a,maxPrice:t,category:d,search:g})),i=await i,n(),i);return L(()=>o.query,()=>s()),(u,f)=>{const $=ue,b=Me,l=st;return p(),w("div",null,[E($),E(b),E(l,{wines:h(m)},null,8,["wines"])])}}};export{mt as default};
